{"data":{"allMarkdownRemark":{"totalCount":30,"edges":[{"node":{"id":"f45c2c06-4fee-54db-a32a-520347ac8cee","html":"<p>A common nested form usually looks like this. Here <em>profileForm</em> contains a nested form <em>address</em> FormGroup. If <em>profileForm</em> needs to get access the <em>address</em> FormGroup, we can simply do this: <code class=\"language-text\">profileForm.get(&#39;address&#39;)</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormGroup<span class=\"token punctuation\">,</span> FormControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-profile-editor'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token operator\">:</span> <span class=\"token string\">'./profile-editor.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./profile-editor.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfileEditorComponent</span> <span class=\"token punctuation\">{</span>\n  profileForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    firstName<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    lastName<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    address<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      street<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      city<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      state<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      zip<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">[formGroup]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>profileForm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(ngSubmit)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onSubmit()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n    First Name:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>firstName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n    Last Name:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lastName<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">formGroupName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>Address<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n      Street:\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>street<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n      City:\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>city<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n      State:\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n      Zip Code:\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zip<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">formArrayName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>aliases<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>Aliases<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addAlias()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Add Alias<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">*ngFor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>let alias of aliases.controls; let i=index<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token comment\">&lt;!-- The repeated alias template --></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n        Alias:\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">[formControlName]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>i<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">[disabled]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>!profileForm.valid<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>However, if we want to create a reusable or sophisticated component for <em>address</em> formGroup. How can the parent form <em>profileForm</em> access or control it? That's how <code class=\"language-text\">ControlContainer</code> comes into play. </p>\n<p>The injected <code class=\"language-text\">ControlContainer</code> looks up the component tree and finds the parent form.\nIt allows us to access the parent form across components. From there we can use the <code class=\"language-text\">formControlName</code> for our <code class=\"language-text\">FormControls</code> as expected.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Profile form (parent form)</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormGroup<span class=\"token punctuation\">,</span> FormControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-profile-editor'</span><span class=\"token punctuation\">,</span>\n  templateUrl<span class=\"token operator\">:</span> <span class=\"token string\">'./profile-editor.component.html'</span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./profile-editor.component.css'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfileEditorComponent</span> <span class=\"token punctuation\">{</span>\n  profileForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    firstName<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    lastName<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Address Form (child form)</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> OnInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ControlContainer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-address'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  &lt;form  *ngIf=\"ogFormGroup\" [formGroup]=\"addressForm\">\n    &lt;h5>Address:&lt;/h5>\n    &lt;div class=\"form-group\">\n      &lt;label for=\"name\">Street Name&lt;/label>\n      &lt;input formControlName=\"street\" />\n    &lt;/div>\n    &lt;div class=\"form-group\">\n      &lt;label for=\"name\">City&lt;/label>\n      &lt;input formControlName=\"city\" />\n    &lt;/div>\n    &lt;div class=\"form-group\">\n      &lt;label for=\"name\">State&lt;/label>\n      &lt;input formControlName=\"state\" />\n    &lt;/div>\n    &lt;div class=\"form-group\">\n      &lt;label for=\"name\">Zip&lt;/label>\n      &lt;input formControlName=\"zip\" />\n    &lt;/div>\n  &lt;/form>\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  styleUrls<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./address.component.less'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AddressComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> parentForm<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">public</span> addressForm<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">public</span> controlContainer<span class=\"token operator\">:</span> ControlContainer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addressForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      street<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      city<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      state<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      zip<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentForm <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controlContainer<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentForm<span class=\"token punctuation\">.</span><span class=\"token function\">setControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addressForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addressForm<span class=\"token punctuation\">.</span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>parentForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","excerpt":"A common nested form usually looks like this. Here profileForm contains a nested form address FormGroup. If profileForm needs to get access the address FormGroup, we can simply do this: . However, if we want to create a reusable or sophisticated component for address formGroup…","frontmatter":{"title":"Angular ControlContainer","tags":["Angular"],"excerpt":"ControlContainer solves the issue how the parent form accesses or controls and child form when they reside in different components. "},"fields":{"slug":"/blog/2021/06/02/control-container.html","date":"June 01, 2021","path":"/2021-06-02-control-container.html"}}},{"node":{"id":"0b4df791-e02b-5b52-becd-e56e532e5641","html":"<p>React component provides several \"lifecycle methods\" that you can hook in at particular times. This <a href=\"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram\">lifecycle diagram</a> is very useful that you can use it as a cheat sheet for reference. Recently, I ran into a very complex component that I found it hard to wrap my head around . The most difficult part of that component is asynchronously fetching data in <em>componentDidUpdate</em> method in certain conditions. At the same time, <em>shouldComponentUpdate</em> method should be used properly to avoid redundant rendering. Therefore, I created a demo to simplify the props and state and retain the core logic. This demo has a button. When the button is clicked, the demo generates a random number consecutively ranging from 0 to 5 until the difference between current number and previous number is not greater than 1 or it throws an error.</p>\n<iframe src=\"https://codesandbox.io/embed/silly-shannon-1m5ne?fontsize=14\" title=\"React complicate lifecycle\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<p>I made use of a few <em>console</em> APIs to illustrate what happens in every lifecycle method and when they are called. Specially <em>console.groupStart()</em> and <em>console.groupEnd()</em> help me to visualize what happened in each method and cycle.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 344px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8663e764a657fd4b8ecd31146177ae44/75d93/react-lifecycle-log.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 189.30041152263377%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAmCAYAAADEO7urAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD6ElEQVRIx51W13LiShT0/3/dfVjbJOUcRwHl0NszGNbs+oJsVZ0SAtQ6oU+3XpZlQdf1SNIMRVmi7TrIY13XH8VLR4A4TqAZJkRRKrB5niEf9JNQgHVdww9CGKaF87n5k+HyKb6T4TSOGIYeju8hTGL0w4BhHHB/rJviJRU1UnFG3c0I/RzG0UMcFciSCnXZo8galKJF2Yyb4iVRgA2qdoJIamRegXPVoyJQTaAirlGmBD1vBOz7TpXLBiDNUuimAddzMc0T5mVmEeu3yn5p2xZN0yAII+z2Rziupyb+vjvg9X1HcF9Nb56/MeWRQ5FHkqRw/QARaSTD9QI1/YosaPhgecPTKV8z9Ai0OxyxP5zwttvjqOk46QZ+vb3jnZlL0l/p9DTDgTSRWca3zHyVmQzLcWHZjvpOPlxS6mmGfd+rp8csORdCnW32sq7P6jd5rs9n9dBpmjYC8iJJZIYxM41VibKEe25v3BQJyM8oigKO4yCKog+wddMgvsxQCoLsXxhdpivLXpb1Z+Jw7WFZZPA8G1kWfyLr8hH3BH6YoQRlMvBDwHZmGNbE6YKcBAUDMGzweuVg+B9/YQKyDf+ToQSUYOhTzNkeSx1g7QpMwmGYmIWGMTcwnAWmruKkV9WKhxmO44QspnTZO4TuiapjIvVPSAMdnvmG0NmjbyspvU/VXAG2bUO1rigMLkzb48ZoOJxMHHUb7wcdr7sTHA6qH0aWOzzcFgUoN0XtcnoldsJV9FGSi5LQgnTKshxXRmzkoZSvDHku1M0pTesfYt/4vXH18pyKbRgIguBGja/KeljyVRxmXmS5LDejKEQsP/+48U9cr7eXnEZwXUudgemhMj8s+TqUslxJ3Ibkbgi6sAUr+7lwJRdmLF8IVgixYJye0qZV6nI4RhSGjt4MAl7AcgJI8DSTgMsFcHyyKT3LLquKK2cg4R7Py8jtGR/68sMeXkuuCr5BOCFFokJFe52GGUM7Yuyn7UO50kamW4YlMitDI306Iih9WrgCVVxhmZenfnJHGzWUqqDCuBxA8i0yf+l6QRgqH9bpydL5pEdfHO+gLFQemwVWZijfFKIo5Q6HCMOE2xLT9H3yMuC0hTIqaVDfWr0gcxHnpI4I4KU2YhFB8/dIi4jvNoL8G+/7uC6PPcWjoPoMI9khEBbcXMc++A9Fk6JsL6v4N5PUbn/yntumyD/HlatAnFxDUNiwsyOsdE+w7BJNjvwco+nJgFagG1sF+uUuS2ArMLC3X2EGGsxQg+4fsLN+QfeOLLlAUrEVuUnQBIIhQf/u6U2x5duXSWfyvBCabsGyXDUQTbOg87osqy+E8d/J/wa5ToZ52Iy1cAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"console\"\n        title=\"console\"\n        src=\"/static/8663e764a657fd4b8ecd31146177ae44/75d93/react-lifecycle-log.png\"\n        srcset=\"/static/8663e764a657fd4b8ecd31146177ae44/8aea6/react-lifecycle-log.png 243w,\n/static/8663e764a657fd4b8ecd31146177ae44/75d93/react-lifecycle-log.png 344w\"\n        sizes=\"(max-width: 344px) 100vw, 344px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Let's go through how <em>this.setState</em> works asynchronously. When the <em>loading</em> is set to true in <em>componentDidUpdate</em> method, it immediately goes to <em>shouldComponentUpdate</em>. If the condition is true, then it jumps to the <em>render</em> method.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 307px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eeda447dd396ab1beee35b864fe4b38b/4651d/react-lifecycle-updatenumber.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 130.0411522633745%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADt0lEQVRIx51ViW7bVhD0/39Av6BF4TZJ49RpWqNuEzltkASWUZ8SJVGkeN+XeInHdPcpcpVKrosQWJDvgRzuzuzsO6iqCnmeI8uW8IMQlmXDME1Ytg3H9eB6PoIwRNd16Pv+0ThgwCzL4NLHI2mCqTyHrKiQpjNc3dzh8voWY2mKsizRti2aphEf8g/2hQDk4CtOEuiGCdtxKTMPnu/T2hJ7umkhTTMURSne7R7KsK5r8Xde2LEOJzERLX0s/AncxIAVLTC1bxDlPoo6oyxaAuPy1xR0fbdbMgNyui6B6cGcwKYUM3iJBdkZQfEklHWBMHOx79qm4B6QLzc1YURzEXo4g0Yxc2+hBhJl6CEtIpFpQMBZmSCvMrHXUtb/ZEglF0UBLt0MNIy0S0yNOyjOBKo7w1i/pr0rTM07FFVBFKhQiQ4jVBAuXZi0XrUrShObkmssl0tBvCzTy4oBSZIhTeZQVR2KouPmRsJsporW2l8yPudwozL3Ifee7TjQDAOGZYnQqS+5nTTdEJ2QpKkQZcPbjihcMi88PxCA3MhzZUHN7WC1WqGmKMtKPDdN+2APfiYKA8ZxLBqcAaMoBvPL+/9W9FGnbAATKsegUheLhchaNPD/tNwOIDPLHLJ3uXSNRGJnbEC7rhfRb933A245JYpDGgwGiWIhLzaK9p9ij7obCraqWGfIKjOgl8HWKbu5B9/JkacN8qRBFjVIggbLeIUqX9EeCZUTv6saHQ+LLW4PalKt9KjzT1/COHkD7acB9J8HUH48g3z0GvKL3zA/PsXo6SmU49cI35zB/OUtgt//RH3xHsWvr7Cajteg5JiDmp6aBTX04VeYXJ1g9PE51L9O4I/eYTo8hnzxCpPzF5DOj+DcvkU0GiKfXaNTZTRETzk4RflusKaAxttBRb2V0piSj49w9+wJxs+f4fLwW1x9f4jRD09FDL/5GtdPvkP0xwDt5RDV8APK8/eoLj4S2Bka4pwz7AQgO4WEaWjDI2vZcQLNC6A6HswwhkHKK7ZL/rbIxzHytkNGNO2I80kY4eV129D4osHqkO2CgADVBQyyWkLNniYpAqoiiiIUdFzUlASXdx87Km+cQo0dUEZ8d1z3wWHwX47ZsZ6madB1jQZGudXU+wfBo4BBGInhwEOBY0nlrUG/wHprwBA2H5/EI/PVto2g/Iu8vB4OGUxS06QTLs9LMTibpiPg/j442839wVNvfTT2NLpABz3Iz8BM7jGfdzRUe6haj9G4E/ck7ekdsmnU783+b9ylxukXGFckAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"update_number\"\n        title=\"update_number\"\n        src=\"/static/eeda447dd396ab1beee35b864fe4b38b/4651d/react-lifecycle-updatenumber.png\"\n        srcset=\"/static/eeda447dd396ab1beee35b864fe4b38b/8aea6/react-lifecycle-updatenumber.png 243w,\n/static/eeda447dd396ab1beee35b864fe4b38b/4651d/react-lifecycle-updatenumber.png 307w\"\n        sizes=\"(max-width: 307px) 100vw, 307px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You can notice that <strong>the Promise callback of updating number runs outside <em>didComponentUpdate</em> method</strong>. This state update then triggers another round of component rendering. Due to the nature of asynchronous update, you should always get a previous component state from the <em>this.setState</em> callback arguments instead of using <em>this.state</em>.\nOtherwise, you may not get the consistent state for update.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevState</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  number<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span>\n  status<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>prevState<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">,</span> number<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The last thing should be noted is the <a href=\"https://reactjs.org/docs/react-component.html#componentdidcatch\"><em>componentDidCatch</em></a> method and the <a href=\"https://reactjs.org/docs/error-boundaries.html\"><em>ErrorBoundary</em></a> component. I found the component didn't catch the error thrown by its child component which got me confused. I later found the <a href=\"https://github.com/facebook/react/issues/11334\">answer</a>. What it says is that error boundaries only catch errors in lifecycle methods. If the error occurs in a Promise callback, it technically doesn't happen inside the lifecycle methods. So the error boundary won't catch it. In this case, you are supposed to handle the error for the Promise callback within the scope.</p>","excerpt":"React component provides several \"lifecycle methods\" that you can hook in at particular times. This lifecycle diagram is very useful that you can use it as a cheat sheet for reference. Recently, I ran into a very complex component that I found it hard to wrap my head around . The…","frontmatter":{"title":"React component lifecycle","tags":["React"],"excerpt":"React component lifecycle is a very important part of React. I created a demo to illustrate how it works with full details"},"fields":{"slug":"/blog/2019/06/14/react-life-cycle.html","date":"June 13, 2019","path":"/2019-06-14-react-life-cycle.html"}}},{"node":{"id":"456e674d-4959-5e7d-bcc9-ba9752e756a3","html":"<p>Browser compatibility is a pain in the arse for many front-end developers. Although most modern browsers have supported the new features or syntax which mitigates the issues, the notorious IE browser is likely to be haunting around for a couple of years. Thus it is essential for us to learn some tricks to address these issues.</p>\n<p>When I decided to use Next.js to build the website, I didn't think too much about the support of IE. So I was panic when I was assigned to tackle this challenge. Luckily, <a href=\"https://nextjs.org/docs#browser-support\">Next.js supports IE11 out of box</a> which is a true life saver (another shout out for Next.js). Nevertheless, I still need to implement polyfill to handle specific problems. Browser compatibility comes down to two major parts -- JavaScript and CSS. I am going to elaborate both of them in two sections.</p>\n<h2>JavaScript</h2>\n<p>JavaScript compatibility takes syntax and new built-ins into account. The most essential tool to address JavaScript compatibility is Babel. <a href=\"https://babeljs.io/docs/en/index.html\">Babel</a> converts the new JavaScript code e.g. ES6+ into a backwards compatible version for older browsers or environments.</p>\n<h3>@babel/preset-env</h3>\n<p>Babel compiler has a wide range of plugins. The Babel community offers a preset environment <strong><a href=\"https://github.com/babel/babel-preset-env\">@babel/preset-env</a></strong> to make our life easier. The default preset includes features in babel-preset-es2015, babel-preset-es2016 and babel-preset-es2017. If you have an array of preset environments, they will be loaded from right to left. It means you should put the most backwards preset at the right end.</p>\n<p>the most basic <strong>.babelrc</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Browserlist</h3>\n<p>If you want to include the polyfills and code transform for target browsers, you should then configure the <a href=\"https://github.com/browserslist/browserslist\">browserlist</a>. Browserlist is a very smart tool. It offers a range of semantic queries to identify the target browsers such as \">5%\" ( larger than 5% global usage), \"last 2 major versions\", \"ie 6-8\" etc. You can either set the browserlist in the <strong>.babelrc</strong> or create an isolated <strong>.browserlistrc</strong> file which is shared by other config files in the project.</p>\n<p><strong>.babelrc</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"env\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"targets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"browsers\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\">0.25%\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"not ie 11\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"not op_mini all\"</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>.browserlist</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># Browsers that we support\nlast 1 version\n&gt; 1%\nIE 10</code></pre></div>\n<p><strong>package.json</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"autoprefixer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.5.4\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"browserslist\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"last 1 version\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"> 1%\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"IE 10\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>@babel/polyfill</h2>\n<p>Babel only transpiles JS syntax by default except for new built-ins such as Iterator, Generator, Set etc. In my case, the new ES6 method Array.from is not supported by ES5. It throws an error in an IE11 browser. So we had to add the plug-in <strong>@babel/polyfill</strong>. What we need to do is to install the <strong>@babel/polyfill</strong> as well as <strong>core-js</strong> in the <em>dependencies</em> (not <em>devDependencies</em>). The <strong>.babelrc</strong> should be configured like this. There are two options for \"useBuiltIns\".</p>\n<ul>\n<li>If \"usage\" is specified, then you don't need to include in either <strong>webpack.config.js</strong> entry array nor source.</li>\n<li>If \"entry\" is specified in <strong>.babelrc</strong> then include <strong>@babel/polyfill</strong> at the top of the entry point to your application via <em>require</em> or <em>import</em>.</li>\n<li>If use \"false\", you need to add the entry array in your <strong>webpack.config.js</strong>. In my case, the \"usage\" option doesn't include all modules for some reason. So I chose \"entry\" and import <strong>@babel/polyfill</strong> in head of the entry file.</li>\n</ul>\n<p><strong>.babelrc</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"useBuiltIns\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"entry\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>However, the major downside of <strong>@babel/polyfill</strong> is its huge size. It adds all available methods to the prototypes. It could be a massive waste. We can only include particular <strong>core-js</strong> module to address this issue. Another problem of <strong>@babel/polyfill</strong> is that it pollutes global scope and prototypes. If it's used in a library, it could lead to unexpected consequences to the library users.</p>\n<h2>@babel/runtime, @babel/transform-runtime</h2>\n<p>In lieu of <strong>@babel/polyfill</strong>, there is an alternative -- <strong>@babel/plugin-transform-runtime</strong>. It only generates the necessary helpers in the source which significantly reduces the size of imports. Plus, the imports don't pollute the global scope. <strong>@babel/plugin-transform-runtime</strong> is often used along with <strong>@babel/runtime</strong> which removes the duplicate helpers generated by the transform plugin.</p>\n<blockquote>\n<p>A caveat should be noted is that instance method such as \"foobar\".includes(\"foo\") will not work since that would require modification of existing built-ins. Under this circumstance, you should use <strong>babel/polyfill</strong> instead.</p>\n</blockquote>\n<h2>CSS</h2>\n<p>CSS used to be a big mess among different browsers. The notorious IE browsers are a nightmare to many developers. Besides, the inconsistent feature support made by different vendors causes a serious headache.\nThere are various approaches to tackle this problem. I would introduce the most commonly used ways in the following.</p>\n<h3>PostCSS &#x26; Autoprefixer</h3>\n<p>One of the most popular ways to mitigate the differences of CSS rules across browsers is <a href=\"https://github.com/postcss/postcss\">PostCSS</a>. More precisely, it's the <a href=\"https://github.com/postcss/autoprefixer\">Autoprefixer</a> plugin. Basically, the plugin parses CSS and add vendor prefixes to CSS rules. To set up PostCSS in Next.js, you need to install <strong>@zeit/next-css</strong>, <strong>postcss-loader</strong> and optionally <strong>postcss-preset-env</strong>. Then create a <strong>next.config.js</strong> and a <strong>postcss.config.js</strong>.</p>\n<p><strong>next.config.js</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> withPlugins <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next-compose-plugins'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> withCss <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@zeit/next-css'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">withPlugins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span>\n    withCss<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      postcssLoaderOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        parser<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>postcss.config.js</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'postcss-preset-env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>You can add '<em>grid: true</em>' to enable the grid layout in IE. Personally, I don't recommend it. Because grid layout in IE behaves very different than other popular browsers. The config also picks up <strong>.browserlistrc</strong> setting. You can specify it as '<em>browser: \"> 5%\"</em>' in the config or create an isolated <strong>.browserlist</strong> file as mentioned above.</p>\n</blockquote>\n<h3>&#x3C;!--[if IE]></h3>\n<h3>Property overrides</h3>\n<h3>@supports</h3>\n<h3>Modernizr</h3>","excerpt":"Browser compatibility is a pain in the arse for many front-end developers. Although most modern browsers have supported the new features or syntax which mitigates the issues, the notorious IE browser is likely to be haunting around for a couple of years. Thus it is essential for…","frontmatter":{"title":"Browser support issues in Next.js","tags":null,"excerpt":null},"fields":{"slug":"/blog/2019/06/12/nextjs-ie-support.html","date":"June 11, 2019","path":"/2019-06-12-nextjs-ie-support.html"}}},{"node":{"id":"80ba7cbe-8977-5d12-a52c-c1144bb9256e","html":"<p>Recently I am asked to create a tab bar which is supposed to work like the one on Chrome browser. To be more specific, when the tabs don't take up the full width, they have a fixed size. When the total width of the tabs is over the the bound of the tab bar, the tabs should shrink and divide the bar space evenly.</p>\n<p>I tried out several solutions, most of them just got the tab bar overflowed or increased the width of the tab bar. Eventually, my hunch was telling me that this was a best use case of using flex-box layout. I knew flex-box quite a while and made use of it in many situations. However, <em>justify-content</em>, <em>align-items</em>, and <em>flex-direction</em> are three properties I used most. I realized that there were some other properties that I thought I knew, but I actually didn't understand how to take a full advantage of them. They are <em>flex-grow</em>, <em>flex-shrink</em>, and <em>flex-basis</em>. And the most tricky one is <em>flex-basis</em>. It defines the default size of an element before the remaining space is distributed. Its default value is 'auto' which means it looks at the width and height property. It's worth noting that the container component should have an indicative size before these three flex rules kick in.</p>\n<p>First, we give a fixed width to tab container and apply flex layout to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> flex-start<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 40px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #000<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #acacac<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For tabs, <em>flex-grow</em> is set to 0 which means its size is based off the <em>flex-basis</em> when there are remaining space in the container. On the other hand,\n<em>flex-shrink</em> is 1 which means the tabs are distributed evenly based on the width of the container if the container is out of empty space.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.tab</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">flex-grow</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">flex-shrink</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">flex-basis</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #a00<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Viola! Now we have a tab bar just works like any others. Here is a demo you can play around with.</p>\n<iframe height=\"365\" style=\"width: 100%;\" scrolling=\"no\" title=\"flexbox-tabs\" src=\"//codepen.io/dontry018/embed/WPLPYv/?height=265&theme-id=0&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/dontry018/pen/WPLPYv/'>flexbox-tabs</a> by loconomo\n  (<a href='https://codepen.io/dontry018'>@dontry018</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>","excerpt":"Recently I am asked to create a tab bar which is supposed to work like the one on Chrome browser. To be more specific, when the tabs don't take up the full width, they have a fixed size. When the total width of the tabs is over the the bound of the tab bar, the tabs should shrink…","frontmatter":{"title":"Create a tab bar with flex-box layout","tags":["CSS","LAYOUT"],"excerpt":"Let's use flex-box layout to create a tab bar"},"fields":{"slug":"/blog/2019/01/31/flex-box.html","date":"January 30, 2019","path":"/2019-01-31-flex-box.html"}}},{"node":{"id":"65cfb82e-6343-55e6-890d-24951fb2f1cf","html":"<p>Gatsby is a blazing-fast static site generator for React.</p>\n<h2>gatsby-config.js</h2>\n<p>Site configuration options for a Gatsby site are placed in a file at the root of the project folder called gatsby-config.js.</p>\n<p>It is usually used to set up siteMetadata and plugins. There are some commonly used plugins. <a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem/\"><strong>gatsby-source-filesystem</strong></a> -- A Gatsby source plugin for sourcing data into your Gatsby application from your local filesystem. <a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\"><strong>gatsby-transformer-remark</strong></a> -- a plugin parses Markdown files using <strong>Remark</strong>.</p>\n<h2>gatsby-node.js</h2>\n<p>We can make use of <a href=\"https://www.gatsbyjs.org/docs/node-apis/\"><strong>Gatsby node API</strong></a> in the <strong>gatsby-node.js</strong> file. Two most common use case are creating custom pages driven by GraphQL data and adding new nodes or fields to GraphQL.</p>","excerpt":"Gatsby is a blazing-fast static site generator for React. gatsby-config.js Site configuration options for a Gatsby site are placed in a file at the root of the project folder called gatsby-config.js. It is usually used to set up siteMetadata and plugins. There are some commonly…","frontmatter":{"title":"Migration to Gatsby","tags":["BLOG","REACT","GRAPHQL"],"excerpt":"Gatsby is a blazing-fast static site generator for React."},"fields":{"slug":"/blog/2018/6/20/gatsby.html","date":"June 19, 2018","path":"/2018-6-20-gatsby.html"}}},{"node":{"id":"eb40d728-f3db-5377-9177-0c4e59496041","html":"<h3><BrowserRouter></h3>\n<p>A <code class=\"language-text\">&lt;Router&gt;</code> uses the HTML5 history API (<code class=\"language-text\">pushState</code>, <code class=\"language-text\">replaceState</code> and the <code class=\"language-text\">popstate</code> event) to keep your UI in sync with the URL.</p>\n<h5>basename: string</h5>\n<p>The base URL for all locations. If your app is served from a sub-directory on your server, you’ll want to set this to the sub-directory. A properly formatted basename should have a leading slash, but no trailing slash.</p>\n<h5>forceRefresh: bool</h5>\n<p>If true, the router will use full page refreshes on page navigation. You probably only want this in browsers that don’t support the HTML5 history API.</p>\n<h5>keyLength: number</h5>\n<p>The length of location.key. Defaults to 6</p>\n<hr>\n<h3><Route></h3>\n<h5>Route render methods</h5>\n<p>There are 3 ways to render something with a <Route>:</p>\n<ul>\n<li><code class=\"language-text\">&lt;Route component&gt;</code></li>\n<li><code class=\"language-text\">&lt;Route render&gt;</code></li>\n<li><code class=\"language-text\">&lt;Route children&gt;</code></li>\n</ul>\n<p>Each is useful in different circumstances. You should use only one of these props on a given <Route>. See their explanations below to understand why you have 3 options. Most of the time you’ll use component.</p>\n<h5>component</h5>\n<p>A React component to render only when the location matches. It will be rendered with route props.</p>\n<p>The router uses React.createElement to create a new React element every render.</p>\n<h5>render: function</h5>\n<p>This allows for convenient inline rendering and wrapping without the undesired remounting explained above.Instead of having a new React element created for you using the component prop, you can pass in a function to be called when the location matches. The render prop receives all the same route props (match, location and history) as the component render prop.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/home<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// wrapping/composing</span>\n<span class=\"token comment\">// You can spread routeProps to make them available to your rendered Component</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FadingRoute</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> component<span class=\"token operator\">:</span> Component<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span>\n    <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">rest</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">routeProps</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FadeIn</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">routeProps</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FadeIn</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h5>children: function</h5>\n<p>Sometimes you need to render whether the path matches the location or not. In these cases, you can use the function children prop. It works exactly like render except that <strong>it gets called no matter there is a match or not.</strong></p>\n<p>This could be useful for animations:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">children</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Animate will always render, so you can use lifecycles\n      to animate its child in and out */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Animate</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>match <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Something</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">rest</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Animate</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Warning: Both <Route component> and <Route render> take precedence over <Route children> so don’t use more than one in the same <Route>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItemLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/somewhere<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItemLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/somewhere-else<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListItemLink</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> to<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span>\n    <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>to<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">children</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>match <span class=\"token operator\">?</span> <span class=\"token string\">'active'</span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>to<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">rest</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3><code class=\"language-text\">&lt;Prompt&gt;</code></h3>\n<p>Used to prompt the user before navigating away from a page. When your application enters a state that should prevent the user from navigating away (like a form is half-filled out), render a <Prompt>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Prompt</span></span> <span class=\"token attr-name\">when</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>formIsHalfFilledOut<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Are you sure you want to leave?<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Could be useful for animations:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">children</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/* Animate will always render, so you can use lifecycles\n      to animate its child in and out */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Animate</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>match <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Something</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">rest</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Animate</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<hr>\n<h3><code class=\"language-text\">&lt;HashRouter&gt;</code></h3>\n<p>A <code class=\"language-text\">&lt;Router&gt;</code> that uses the hash portion of the URL (i.e. window.location.hash) to keep your UI in sync with the URL.</p>\n<hr>\n<h3><code class=\"language-text\">&lt;NavLink&gt;</code></h3>\n<p>A special version of the <Link> that will add styling attributes to the rendered element when it matches the current URL.</p>\n<h5>activeClassName: string</h5>\n<p>The class to give the element when it is active. The default given class is active. This will be joined with the className prop.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NavLink</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/faq<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">activeClassName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selected<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  FAQs\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">NavLink</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h5>activeStyle: object</h5>\n<p>The styles to apply to the element when it is active.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NavLink</span></span>\n  <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/faq<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">activeStyle</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    fontWeight<span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>\n    color<span class=\"token operator\">:</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  FAQs\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">NavLink</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<hr>\n<h3>history</h3>\n<p>The term “history” and \"history object\" in this documentation refers to the history package, which is one of only 2 major dependencies of React Router (besides React itself), and which provides several different implementations for managing session history in JavaScript in various environments.The following terms are also used:</p>\n<ul>\n<li>“browser history” - A DOM-specific implementation, useful in web browsers that support the HTML5 history API</li>\n<li>“hash history” - A DOM-specific implementation for legacy web browsers</li>\n<li>“memory history” - An in-memory history implementation, useful in testing and non-DOM environments like React Native</li>\n</ul>\n<p>history objects typically have the following properties and methods:</p>\n<ul>\n<li>length - (number) The number of entries in the history stack</li>\n<li>action - (string) The current action (PUSH, REPLACE, or POP)</li>\n<li>\n<p>location - (object) The current location. May have the following properties:</p>\n<ul>\n<li>pathname - (string) The path of the URL</li>\n<li>search - (string) The URL query string</li>\n<li>hash - (string) The URL hash fragment</li>\n<li>state - (object) location-specific state that was provided to e.g. push(path, state) when this location was pushed onto the stack. Only available in browser and memory history.</li>\n</ul>\n</li>\n<li>push(path, [state]) - (function) Pushes a new entry onto the history stack</li>\n<li>replace(path, [state]) - (function) Replaces the current entry on the history stack</li>\n<li>go(n) - (function) Moves the pointer in the history stack by n entries</li>\n<li>goBack() - (function) Equivalent to go(-1)</li>\n<li>goForward() - (function) Equivalent to go(1)</li>\n<li>block(prompt) - (function) Prevents navigation (see the history docs)</li>\n</ul>\n<hr>\n<h3>location</h3>\n<p>Locations represent where the app is now, where you want it to go, or even where it was. It looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  key<span class=\"token operator\">:</span> <span class=\"token string\">'ac3df4'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// not with HashHistory!</span>\n  pathname<span class=\"token operator\">:</span> <span class=\"token string\">'/somewhere'</span>\n  search<span class=\"token operator\">:</span> <span class=\"token string\">'?some=search-string'</span><span class=\"token punctuation\">,</span>\n  hash<span class=\"token operator\">:</span> <span class=\"token string\">'#howdy'</span><span class=\"token punctuation\">,</span>\n  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span>userDefined<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The router will provide you with a location object in a few places:</p>\n<ul>\n<li>Route component as this.props.location</li>\n<li>Route render as ({ location }) => ()</li>\n<li>Route children as ({ location }) => ()</li>\n<li>withRouter as this.props.location</li>\n</ul>\n<p>It is also found on history.location but you shouldn’t use that because its mutable. You can read more about that in the history doc.A location object is never mutated so you can use it in the lifecycle hooks to determine when navigation happens, this is really useful for data fetching and animation.</p>\n<hr>\n<h3>match</h3>\n<p>A match object contains information about how a <strong><Route path></strong> matched the URL. match objects contain the following properties:</p>\n<ul>\n<li>params - (object) Key/value pairs parsed from the URL corresponding to the dynamic segments of the path</li>\n<li>isExact - (boolean) true if the entire URL was matched (no trailing characters)</li>\n<li>path - (string) The path pattern used to match. Useful for building nested <Route>s</li>\n<li>url - (string) The matched portion of the URL. Useful for building nested <Link>s</li>\n<li>-</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/relative-path</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You’ll have access match objects in various places:</p>\n<ul>\n<li>Route component as this.props.match</li>\n<li>Route render as ({ match }) => ()</li>\n<li>Route children as ({ match }) => ()</li>\n<li>withRouter as this.props.match</li>\n<li>matchPath as the return value</li>\n</ul>\n<p>If a Route does not have a path, and therefore always matches, you’ll get the closest parent match. Same goes for withRouter.</p>\n<h3>null match</h3>\n<p>null matches A <Route> that uses the children prop will call its children function even when the route’s path does not match the current location. When this is the case, the match will be null. Being able to render a <Route>'s contents when it does match can be useful, but certain challenges arise from this situation.</p>\n<p>The default way to “resolve” URLs is to join the match.url string to the “relative” path. <code class=\"language-text\">${match.url}/relative-path</code></p>\n<p>If you attempt to do this when the match is null, you will end up with a TypeError. This means that it is considered unsafe to attempt to join “relative” paths inside of a <Route> when using the children prop.</p>\n<hr>\n<h3>matchPath</h3>\n<p>This lets you use the same matching code that <Route> uses except outside of the normal render cycle, like gathering up data dependencies before rendering on the server.import { matchPath } from 'react-router'</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> match <span class=\"token operator\">=</span> <span class=\"token function\">matchPath</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users/123'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  path<span class=\"token operator\">:</span> <span class=\"token string\">'/users/:id'</span><span class=\"token punctuation\">,</span>\n  exact<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  strict<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h5>pathname</h5>\n<p>The first argument is the pathname you want to match. If you're using this on the server with Node.js, it would be req.path.</p>\n<h5>props</h5>\n<p>The second argument are the props to match against, they are identical to the matching props Route accepts:</p>\n<hr>\n<h3>withRouter</h3>\n<p>You can get access to the history object's properties and the closest <Route>'s match via the withRouter higher-order component. withRouter will pass updated match, location, and history props to the wrapped component whenever it renders</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// A simple component that shows the pathname of the current location</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ShowTheLocation</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    match<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n    location<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n    history<span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">.</span>isRequired\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> match<span class=\"token punctuation\">,</span> location<span class=\"token punctuation\">,</span> history <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You are now at </span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>\n  withRouter<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// This does not</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// nor</span>\n<span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  withRouter\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h3>Takeaways:</h3>\n<ol>\n<li>Using withRouter, we can access <strong>history</strong>, <strong>match</strong> and <strong>location</strong> props.</li>\n<li>\n<p>There are 3 ways for rendering with a <code class=\"language-text\">&lt;Route&gt;</code></p>\n<ul>\n<li><code class=\"language-text\">&lt;Route component&gt;</code> easiest, mount a new component everytime when the path is matched</li>\n<li><code class=\"language-text\">&lt;Route render&gt;</code> convenient inline rendering without undesired remounting.</li>\n<li><code class=\"language-text\">&lt;Route children&gt;</code> render no matter if it matches the path</li>\n</ul>\n</li>\n<li><code class=\"language-text\">&lt;NavLink&gt;</code> will add styling attributes when it matches the current URL</li>\n</ol>","excerpt":"A  uses the HTML5 history API (,  and the  event) to keep your UI in sync with the URL. basename: string The base URL for all locations. If your app is served from a sub-directory on your server, you’ll want to set this to the sub-directory. A properly formatted basename should…","frontmatter":{"title":"React Router Essential","tags":["REACT-ROUTER","REACT"],"excerpt":"The core concepts of React Router"},"fields":{"slug":"/blog/2018/04/05/React-Router.html","date":"April 04, 2018","path":"/2018-04-05-React-Router.html"}}},{"node":{"id":"085210a8-9c9f-560a-b0bd-b517dc28dea3","html":"<p>This document is my attempt to formally explain my mental model of React. The intention is to describe this in terms of deductive reasoning that lead us to this design.</p>\n<p>There may certainly be some premises that are debatable and the actual design of this example may have bugs and gaps. This is just the beginning of formalizing it. Feel free to send a pull request if you have a better idea of how to formalize it. The progression from simple -> complex should make sense along the way without too many library details shining through.</p>\n<p>The actual implementation of React.js is full of pragmatic solutions, incremental steps, algorithmic optimizations, legacy code, debug tooling and things you need to make it actually useful. Those things are more fleeting, can change over time if it is valuable enough and have high enough priority. The actual implementation is much more difficult to reason about.</p>\n<p>I like to have a simpler mental model that I can ground myself in.</p>\n<h2>Transformation</h2>\n<p>The core premise for React is that UIs are simply a projection of data into a different form of data. The same input gives the same output. A simple pure function.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> fontWeight<span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span> labelContent<span class=\"token operator\">:</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">'Sebastian Markbåge'</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">{</span> fontWeight<span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span> labelContent<span class=\"token operator\">:</span> <span class=\"token string\">'Sebastian Markbåge'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Abstraction</h2>\n<p>You can't fit a complex UI in a single function though. It is important that UIs can be abstracted into reusable pieces that don't leak their implementation details. Such as calling one function from another.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyUserBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    borderStyle<span class=\"token operator\">:</span> <span class=\"token string\">'1px solid blue'</span><span class=\"token punctuation\">,</span>\n    childContent<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName<span class=\"token operator\">==</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> <span class=\"token operator\">==</span>user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span> firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Sebastian'</span><span class=\"token punctuation\">,</span> lastName<span class=\"token operator\">:</span> <span class=\"token string\">'Markbåge'</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">{</span>\n  borderStyle<span class=\"token operator\">:</span> <span class=\"token string\">'1px solid blue'</span><span class=\"token punctuation\">,</span>\n  childContent<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> fontWeight<span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span> labelContent<span class=\"token operator\">:</span> <span class=\"token string\">'Sebastian Markbåge'</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Composition</h2>\n<p>To achieve truly reusable features, it is not enough to simply reuse leaves and build new containers for them. You also need to be able to build abstractions from the containers that <em>compose</em> other abstractions. The way I think about \"composition\" is that they're combining two or more different abstractions into a new one.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">children</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    borderStyle<span class=\"token operator\">:</span> <span class=\"token string\">'1px solid blue'</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token operator\">:</span> children\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">UserBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>State</h2>\n<p>A UI is NOT simply a replication of server / business logic state. There is actually a lot of state that is specific to an exact projection and not others. For example, if you start typing in a text field. That may or may not be replicated to other tabs or to your mobile device. Scroll position is a typical example that you almost never want to replicate across multiple projections.</p>\n<p>We tend to prefer our data model to be immutable. We thread functions through that can update state as a single atom at the top.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user<span class=\"token punctuation\">,</span> likes<span class=\"token punctuation\">,</span> onClick</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span> <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Likes: '</span><span class=\"token punctuation\">,</span> <span class=\"token function\">LikeBox</span><span class=\"token punctuation\">(</span>likes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">LikeButton</span><span class=\"token punctuation\">(</span>onClick<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Implementation Details</span>\n\n<span class=\"token keyword\">var</span> likes <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">addOneMoreLike</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  likes<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">rerender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Init</span>\n\n<span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Sebastian'</span><span class=\"token punctuation\">,</span> lastName<span class=\"token operator\">:</span> <span class=\"token string\">'Markbåge'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  likes<span class=\"token punctuation\">,</span>\n  addOneMoreLike\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>NOTE: These examples use side-effects to update state. My actual mental model of this is that they return the next version of state during an \"update\" pass. It was simpler to explain without that but we'll want to change these examples in the future.</em></p>\n<h2>Memoization</h2>\n<p>Calling the same function over and over again is wasteful if we know that the function is pu==re. We can create a memoized version of a function that keeps track of the last argument and last result. That way we don't have to reexecute it if we keep using the same value.==</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> cachedArg<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> cachedResult<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedArg <span class=\"token operator\">===</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> cachedResult<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    cachedArg <span class=\"token operator\">=</span> arg<span class=\"token punctuation\">;</span>\n    cachedResult <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> cachedResult<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> MemoizedNameBox <span class=\"token operator\">=</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span>NameBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">NameAndAgeBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user<span class=\"token punctuation\">,</span> currentTime</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">MemoizedNameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Age in milliseconds: '</span><span class=\"token punctuation\">,</span>\n    currentTime <span class=\"token operator\">-</span> user<span class=\"token punctuation\">.</span>dateOfBirth\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Lists</h2>\n<p>Most UIs are some form of lists that then produce multiple different values for each item in the list. This creates a natural hierarchy.</p>\n<p>To manage the state for each item in a list we can create a Map that holds the state for a particular item.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users<span class=\"token punctuation\">,</span> likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">(</span>\n    user<span class=\"token punctuation\">,</span>\n    likesPerUser<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">updateUserLikes</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> likesPerUser<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> likesPerUser <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">updateUserLikes</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> likeCount</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  likesPerUser<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> likeCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">rerender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">,</span> likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>NOTE: We now have multiple different arguments passed to FancyNameBox. That breaks our memoization because we can only remember one value at a time. More on that below.</em></p>\n<h2>Continuations</h2>\n<p>Unfortunately, since there are so many lists of lists all over the place in UIs, it becomes quite a lot of boilerplate to manage that explicitly.</p>\n<p>We can move some of this boilerplate out of our critical business logic by deferring execution of a function. For example, by using \"currying\" (<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\"><code class=\"language-text\">bind</code></a> in JavaScript). Then we pass the state through from outside our core functions that are now free of boilerplate.</p>\n<p>This isn't reducing boilerplate but is at least moving it out of the critical business logic.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">UserList</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> box <span class=\"token operator\">=</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> resolvedChildren <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span>likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> resolvedBox <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>box<span class=\"token punctuation\">,</span>\n  children<span class=\"token operator\">:</span> resolvedChildren\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>State Map</h2>\n<p>We know from earlier that once we see repeated patterns we can use composition to avoid reimplementing the same pattern over and over again. We can move the logic of extracting and passing state to a low-level function that we reuse a lot.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyBoxWithState</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">children<span class=\"token punctuation\">,</span>\n  stateMap<span class=\"token punctuation\">,</span>\n  updateState</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>\n    children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span> <span class=\"token operator\">=></span> child<span class=\"token punctuation\">.</span><span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span>\n      stateMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      updateState\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    continuation<span class=\"token operator\">:</span> <span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    key<span class=\"token operator\">:</span> user<span class=\"token punctuation\">.</span>id\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBoxWithState</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> continuation <span class=\"token operator\">=</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span>likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Memoization Map</h2>\n<p>Once we want to memoize multiple items in a list memoization becomes much harder. You have to figure out some complex caching algorithm that balances memory usage with frequency.</p>\n<p>Luckily, UIs tend to be fairly stable in the same position. The same position in the tree gets the same value every time. This tree turns out to be a really useful strategy for memoization.</p>\n<p>We can use the same trick we used for state and pass a memoization cache through the composable function.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arg<span class=\"token punctuation\">,</span> memoizationCache</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>memoizationCache<span class=\"token punctuation\">.</span>arg <span class=\"token operator\">===</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> memoizationCache<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    memoizationCache<span class=\"token punctuation\">.</span>arg <span class=\"token operator\">=</span> arg<span class=\"token punctuation\">;</span>\n    memoizationCache<span class=\"token punctuation\">.</span>result <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FancyBoxWithState</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">children<span class=\"token punctuation\">,</span>\n  stateMap<span class=\"token punctuation\">,</span>\n  updateState<span class=\"token punctuation\">,</span>\n  memoizationCache</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>\n    children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span> <span class=\"token operator\">=></span> child<span class=\"token punctuation\">.</span><span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span>\n      stateMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      updateState<span class=\"token punctuation\">,</span>\n      memoizationCache<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> MemoizedFancyNameBox <span class=\"token operator\">=</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span>FancyNameBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Algebraic Effects</h2>\n<p>It turns out that it is kind of a PITA to pass every little value you might need through several levels of abstractions. It is kind of nice to sometimes have a shortcut to pass things between two abstractions without involving the intermediates. In React we call this \"context\".</p>\n<p>Sometimes the data dependencies don't neatly follow the abstraction tree. For example, in layout algorithms you need to know something about the size of your children before you can completely fulfill their position.</p>\n<p>Now, this example is a bit \"out there\". I'll use <a href=\"http://math.andrej.com/eff/\">Algebraic Effects</a> as <a href=\"https://esdiscuss.org/topic/one-shot-delimited-continuations-with-effect-handlers\">proposed for ECMAScript</a>. If you're familiar with functional programming, they're avoiding the intermediate ceremony imposed by monads.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">ThemeBorderColorRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">children</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> color <span class=\"token operator\">=</span> raise <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThemeBorderColorRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    borderWidth<span class=\"token operator\">:</span> <span class=\"token string\">'1px'</span><span class=\"token punctuation\">,</span>\n    borderColor<span class=\"token operator\">:</span> color<span class=\"token punctuation\">,</span>\n    children<span class=\"token operator\">:</span> children\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">BlueTheme</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">children</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> effect ThemeBorderColorRequest <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> continuation<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">BlueTheme</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","excerpt":"This document is my attempt to formally explain my mental model of React. The intention is to describe this in terms of deductive reasoning that lead us to this design. There may certainly be some premises that are debatable and the actual design of this example may have bugs and…","frontmatter":{"title":"React - Basic Theoretical Concepts","tags":["REACT"],"excerpt":null},"fields":{"slug":"/blog/2017/12/08/react-basic-theoretical-concepts.html","date":"December 07, 2017","path":"/2017-12-08-react-basic-theoretical-concepts.html"}}},{"node":{"id":"d0cb65a2-1166-58cf-af50-94250114e107","html":"<p>JavaScript allows us make new method available to a specific type.\nFor example, we can augment Function.prototype with a new method like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    Function.prototype.method = function(name, func){\n        this.prototype[name] = func;\n        return this;\n    };</code></pre></div>\n<p>Morever, we can augment a specific type with a new method like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    Number.method(&#39;integer&#39;, function(){\n        return Math[this &lt; 0 ? &#39;ceiling&#39; : &#39;floor&#39;](this);\n        });\n\n    document.writeln((-10/3).integer())</code></pre></div>\n<p>This method help us convert a Number type to integer.</p>","excerpt":"JavaScript allows us make new method available to a specific type.\nFor example, we can augment Function.prototype with a new method like this: Morever, we can augment a specific type with a new method like this: This method help us convert a Number type to integer.","frontmatter":{"title":"Augmenting types","tags":null,"excerpt":null},"fields":{"slug":"/blog/2016/11/5/augmenting-typs.html","date":"November 04, 2016","path":"/2016-11-5-augmenting-typs.html"}}},{"node":{"id":"6210a7a0-53c7-5c5f-b630-12bbfb84210d","html":"<p> Recently I got a job as a front-end developer. It's very interesting and exciting. But working in a group is different from working individually. Currently, we are working on a project of developing an online course platform. It's a big project. The programs are intricate and complex. Thus it's very crucial for us to write readable, flexible and maintainable code. This is so true especially for front-end developers Because you work across different languages: html, css, javascript. If you don't write consistently with certain code style, it will be a nightmare as the project grows bigger.  Therefore, a code guide is essential. Here are some code／style guide:</p>\n<ul>\n<li><a href=\"http://alloyteam.github.io/CodeGuide/\">Code guide from QQ alloyteam</a></li>\n<li><a href=\"http://nec.netease.com/standard\">NEC style guide from Netease</a></li>\n<li><a href=\"http://zhibimo.com/read/Ashu/front-end-style-guide/\">Style guide from zhibimo</a></li>\n</ul>","excerpt":"Recently I got a job as a front-end developer. It's very interesting and exciting. But working in a group is different from working individually. Currently, we are working on a project of developing an online course platform. It's a big project. The programs are intricate and…","frontmatter":{"title":"Code Guide","tags":["HTML","CSS"],"excerpt":null},"fields":{"slug":"/blog/2016/03/05/code-guide.html","date":"March 04, 2016","path":"/2016-03-05-code-guide.html"}}},{"node":{"id":"207e1855-0498-52b7-ad12-852551b5e24d","html":"<p>Linter is a tool for identifying and reporting on whether the patterns or code adhere to certain style guidelines. Most of programming languages has linter, some compilers incorporate linting into the compilation process.</p>\n<p>JavaScript, being a dynamic and loosely-typed language, is especially prone to developer error. Because of the absence of compilation process, we typically find syntax or other errors in execution process.</p>\n<p>There are three major Linters for Javascript code: JSLint, JSHint, and ESLint. JSLint is the earliest Linter developed by Douglas Crockford. It has been defined as the exact patterns and styles as Douglas Crockford's.</p>\n<p>From my point of view, ESLint prevails among other Linters. First, it checkout your syntax and style at the same time. Besides, you can customize your own rules and styles. Furthermore, ESLint is a completely pluggable tool. It is available for many IDEs. When configuring and setting up the rules, you just need to create a \".eslintrc.json\" file in the root of your project directory and write down the rules you want to apply to. ESLint is written using Node.js to provide a fast runtime environment and easy installation via npm.</p>\n<p>In a nutshell, ESLint is a user-friendly tool. It helps you write neat and beautiful code.</p>\n<p>For more information, please refer to the links below:</p>\n<ul>\n<li><a href=\"http://eslint.org/\">ESLint official page</a></li>\n<li><a href=\"http://javascript.ruanyifeng.com/tool/lint.html\">A simple tutorial</a></li>\n</ul>","excerpt":"Linter is a tool for identifying and reporting on whether the patterns or code adhere to certain style guidelines. Most of programming languages has linter, some compilers incorporate linting into the compilation process. JavaScript, being a dynamic and loosely-typed language, is…","frontmatter":{"title":"ESLint","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/12/24/eslint.html","date":"December 23, 2015","path":"/2015-12-24-eslint.html"}}},{"node":{"id":"a6a3a108-9fa0-56ce-a1a0-9fc81f64bbee","html":"<p>AJAX( Asynchronous Javascript and XML), is a web development technique for creating interactive web application. In conventional web applications, it transmits information to and from the server using synchronous requests. It means that when you fill out a form and submit, you will get directed to a new page with new informaiton from the server. With AJAX, when you transmit a part of information, it will make a request to server, interpret the results, and update the current page.</p>\n<p>The process of Ajax request comprises of 4 stages: </p>\n<ol>\n<li>The client uses open() to initiate and set the request method like GET or POST.</li>\n<li>The client uses send() to send the request server.</li>\n<li>The server receives the request and send back the response status to client.</li>\n<li>The client respond to server according to the status code(e.g. <em>200</em> means success). </li>\n</ol>\n<h4>Here is an AJAX simple example:</h4>\n<h4>The client-side code:</h4>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>员工查询<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>请输入员工编号：<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>keyword<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>查询<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>searchResult<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>员工新建<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>请输入员工姓名：<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>staffName<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>请输入员工编号：<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>staffNumber<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>请选择员工性别：<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>staffSex<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>女<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">></span></span>男<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>请输入员工职位：<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>staffJob<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>save<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>保存<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>createResult<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ready</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#search\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n        $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \n            type<span class=\"token operator\">:</span> <span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span>    \n            url<span class=\"token operator\">:</span> <span class=\"token string\">\"http://127.0.0.1:8080/ajaxdemo/serverjson2.php?number=\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#keyword\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            dataType<span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n                    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#searchResult\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#searchResult\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"出现错误：\"</span> <span class=\"token operator\">+</span> data<span class=\"token punctuation\">.</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>  \n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">jqXHR</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>     \n               <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"发生错误：\"</span> <span class=\"token operator\">+</span> jqXHR<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>     \n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#save\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> \n        $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \n            type<span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>   \n            url<span class=\"token operator\">:</span> <span class=\"token string\">\"serverjson.php\"</span><span class=\"token punctuation\">,</span>\n            data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                name<span class=\"token operator\">:</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#staffName\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                number<span class=\"token operator\">:</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#staffNumber\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                sex<span class=\"token operator\">:</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#staffSex\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                job<span class=\"token operator\">:</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#staffJob\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            dataType<span class=\"token operator\">:</span> <span class=\"token string\">\"json\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n                    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#createResult\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#createResult\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"出现错误：\"</span> <span class=\"token operator\">+</span> data<span class=\"token punctuation\">.</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>  \n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">jqXHR</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>     \n               <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"发生错误：\"</span> <span class=\"token operator\">+</span> jqXHR<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>     \n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n####The server-side code:\n```php\n<?php\nheader(\"Content-Type: text/plain;charset=utf-8\"); \n$staff = array\n    (\n        array(\"name\" => \"洪七\", \"number\" => \"101\", \"sex\" => \"男\", \"job\" => \"总经理\"),\n        array(\"name\" => \"郭靖\", \"number\" => \"102\", \"sex\" => \"男\", \"job\" => \"开发工程师\"),\n        array(\"name\" => \"黄蓉\", \"number\" => \"103\", \"sex\" => \"女\", \"job\" => \"产品经理\")\n    );\n<p>if ($<em>SERVER[\"REQUEST</em>METHOD\"] == \"GET\") {\nsearch();\n} elseif ($<em>SERVER[\"REQUEST</em>METHOD\"] == \"POST\"){\ncreate();\n}</p>\n<p>function search(){\nif (!isset($<em>GET[\"number\"]) || empty($</em>GET[\"number\"])) {\necho \"参数错误\";\nreturn;\n}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">global $staff;\n$number = $_GET[&quot;number&quot;];\n$result = &quot;没有找到员工。&quot;;\n\n\nforeach ($staff as $value) {\n    if ($value[&quot;number&quot;] == $number) {\n        $result = &quot;找到员工：员工编号：&quot; . $value[&quot;number&quot;] . &quot;，员工姓名：&quot; . $value[&quot;name&quot;] . \n                          &quot;，员工性别：&quot; . $value[&quot;sex&quot;] . &quot;，员工职位：&quot; . $value[&quot;job&quot;];\n        break;\n    }\n}\necho $result;</code></pre></div>\n<p>}</p>\n<p>function create(){\nif (!isset($<em>POST[\"name\"]) || empty($</em>POST[\"name\"])\n|| !isset($<em>POST[\"number\"]) || empty($</em>POST[\"number\"])\n|| !isset($<em>POST[\"sex\"]) || empty($</em>POST[\"sex\"])\n|| !isset($<em>POST[\"job\"]) || empty($</em>POST[\"job\"])) {\necho \"参数错误，员工信息填写不全\";\nreturn;\n}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">echo &quot;员工：&quot; . $_POST[&quot;name&quot;] . &quot; 信息保存成功！&quot;;</code></pre></div>\n<p>}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>","excerpt":"AJAX( Asynchronous Javascript and XML), is a web development technique for creating interactive web application. In conventional web applications, it transmits information to and from the server using synchronous requests. It means that when you fill out a form and submit, you…","frontmatter":{"title":"An AJAX demo","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/12/17/ajax.html","date":"December 16, 2015","path":"/2015-12-17-ajax.html"}}},{"node":{"id":"55dc3fda-629a-5f23-b109-8540c85f64d2","html":"<p>Inheritance is a big topic in JavaScript. Unlike Java or C++ which are object-oriented languages and they can inherit other classes, JavaScript is a prototypal by nature. So the inheritance pattern in JavaScript is far more complicated for me. I still couldn't totally understand how inheritance pattern work after I finished this section.</p>\n<p>Then I found a post which was very helpful. <em><a href=\"http://davidshariff.com/blog/javascript-inheritance-patterns/\">JavaScript Inheritance Patterns</a></em> introduces 3 different ways of how to implement inheritance in JavaScript.</p>\n<h4>Pseudoclassical pattern</h4>\n<ol>\n<li>Invoke a constructor function.</li>\n<li>Point a child’s prototype to the parent’s prototype for inheritance to occur.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * Point a child's prototype to a parent's prototype\n **/</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">extendObj</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">childObj<span class=\"token punctuation\">,</span> parentObj</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    childObj<span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> parentObj<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//base human object</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">Human</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//inhertiable attributes / methods </span>\n<span class=\"token class-name\">Human</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    gender<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    planetOfBirth<span class=\"token operator\">:</span> <span class=\"token string\">'Earth'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">sayGender</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">'\\'s gender is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gender <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">sayPlanet</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">' was born on '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>planetOfBirth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//male</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">Male</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Male'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Davide'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//inherits human</span>\n<span class=\"token function\">extendObj</span><span class=\"token punctuation\">(</span>Male<span class=\"token punctuation\">,</span> Human<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">Female</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Female'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//inherits human</span>\n<span class=\"token function\">extendObj</span><span class=\"token punctuation\">(</span>Female<span class=\"token punctuation\">,</span> Human<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//new instances</span>\n<span class=\"token keyword\">var</span> davide <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Male</span><span class=\"token punctuation\">(</span><span class=\"token string\">'David'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> jane <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Female</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\ndavid<span class=\"token punctuation\">.</span><span class=\"token function\">sayGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// David says my gender is Male</span>\njane<span class=\"token punctuation\">.</span><span class=\"token function\">sayGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Jane says my gender is Female</span>\n\n<span class=\"token class-name\">Male</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>planetOfBirth <span class=\"token operator\">=</span> <span class=\"token string\">'Mars'</span><span class=\"token punctuation\">;</span>\ndavid<span class=\"token punctuation\">.</span><span class=\"token function\">sayPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// David was born on Mars</span>\njane<span class=\"token punctuation\">.</span><span class=\"token function\">sayPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Jane was born on Mars</span></code></pre></div>\n<h4>Functional pattern</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">human</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> that <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    that<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    that<span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    that<span class=\"token punctuation\">.</span>planetOfBirth <span class=\"token operator\">=</span> <span class=\"token string\">'Earth'</span><span class=\"token punctuation\">;</span>\n    that<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayGender</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>that<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">'\\'s gender is '</span> <span class=\"token operator\">+</span> that<span class=\"token punctuation\">.</span>gender<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    that<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayPlanet</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>that<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">' was born on '</span> <span class=\"token operator\">+</span> that<span class=\"token punctuation\">.</span>planetOfBirth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> that<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">male</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> that <span class=\"token operator\">=</span> <span class=\"token function\">human</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    that<span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> <span class=\"token string\">'Male'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> that<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> david <span class=\"token operator\">=</span> <span class=\"token function\">male</span><span class=\"token punctuation\">(</span><span class=\"token string\">'David'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> jane <span class=\"token operator\">=</span> <span class=\"token function\">female</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndavid<span class=\"token punctuation\">.</span><span class=\"token function\">sayGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// David says my gender is Male</span>\njane<span class=\"token punctuation\">.</span><span class=\"token function\">sayGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Jane says my gender is Female</span>\n\ndavid<span class=\"token punctuation\">.</span>planetOfBirth <span class=\"token operator\">=</span> <span class=\"token string\">'Mars'</span><span class=\"token punctuation\">;</span>\ndavid<span class=\"token punctuation\">.</span><span class=\"token function\">sayPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// David was born on Mars</span>\njane<span class=\"token punctuation\">.</span><span class=\"token function\">sayPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Jane was born on Earth</span></code></pre></div>\n<h4>Prototypal pattern</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/***************************************************************\n     * Helper functions for older browsers\n     ***************************************************************/</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'create'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">create</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parentObj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">function</span> <span class=\"token function\">tmpObj</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            tmpObj<span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> parentObj<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">tmpObj</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'defineProperties'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Object<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">defineProperties</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">obj<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> prop <span class=\"token keyword\">in</span> props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                Object<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> prop<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/*************************************************************/</span>\n\n    <span class=\"token keyword\">var</span> human <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        gender<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        planetOfBirth<span class=\"token operator\">:</span> <span class=\"token string\">'Earth'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">sayGender</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">' says my gender is '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gender<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">sayPlanet</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">' was born on '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>planetOfBirth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> male <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>human<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        gender<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span> <span class=\"token string\">'Male'</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> female <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>human<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        gender<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span> <span class=\"token string\">'Female'</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> david <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>male<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span> <span class=\"token string\">'David'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        planetOfBirth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span> <span class=\"token string\">'Mars'</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> jane <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>female<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        name<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>value<span class=\"token operator\">:</span> <span class=\"token string\">'Jane'</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    david<span class=\"token punctuation\">.</span><span class=\"token function\">sayGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// David says my gender is Male</span>\n    david<span class=\"token punctuation\">.</span><span class=\"token function\">sayPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// David was born on Mars</span>\n\n    jane<span class=\"token punctuation\">.</span><span class=\"token function\">sayGender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Jane says my gender is Female</span>\n    jane<span class=\"token punctuation\">.</span><span class=\"token function\">sayPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Jane was born on Earth</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","excerpt":"Inheritance is a big topic in JavaScript. Unlike Java or C++ which are object-oriented languages and they can inherit other classes, JavaScript is a prototypal by nature. So the inheritance pattern in JavaScript is far more complicated for me. I still couldn't totally understand…","frontmatter":{"title":"Inheritance (JS the good parts)","tags":null,"excerpt":null},"fields":{"slug":"/blog/2015/09/22/inheritance.html","date":"September 21, 2015","path":"/2015-09-22-inheritance.html"}}},{"node":{"id":"ff7ff895-3101-5f52-b0ed-617f8df57a99","html":"<p>A module is a function or object that presents an interface but that hides its state and implementation. The module pattern takes advantage of function scope and closure to create relationships that are binding and private.</p>\n<p>The general pattern of a module is a function that defines private variables and functions; creates privileged functions which, through closure, will have access to the private variables and functions; and that returns the privileged functions or stores them in an accessible place. For example, if we want to make an object that produces a serial number:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">serial_maker</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> prefix <span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> seq <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function-variable function\">set_prefix</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                prefix <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">set_seq</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">s</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                seq <span class=\"token operator\">=</span> s<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">gensym</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> prefix <span class=\"token operator\">+</span> seq<span class=\"token punctuation\">;</span>\n                seq <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> seqer <span class=\"token operator\">=</span> <span class=\"token function\">serial_maker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    seqer<span class=\"token punctuation\">.</span>set_prefix <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Q'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    seqer<span class=\"token punctuation\">.</span>set_seq <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> unique <span class=\"token operator\">=</span> seqer<span class=\"token punctuation\">.</span><span class=\"token function\">gensym</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// unique is \"Q1000\"</span></code></pre></div>\n<p>The methods do not make use of this or that. As a result, there is no way to compromise the seqer. It isn’t possible to get or change the prefix or seq except as permitted by the methods. The seqer object is mutable, so the methods could be replaced, but that still does not give access to its secrets. seqer is simply a collection of functions, and those functions are capabilities that grant specific powers to use or modify the secret state.</p>","excerpt":"A module is a function or object that presents an interface but that hides its state and implementation. The module pattern takes advantage of function scope and closure to create relationships that are binding and private. The general pattern of a module is a function that…","frontmatter":{"title":"Module (JS the good parts)","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/09/21/module.html","date":"September 20, 2015","path":"/2015-09-21-module.html"}}},{"node":{"id":"bdb2849f-c688-57ee-9b55-d246e860996e","html":"<p>Currying is a good way to process multiple arguments flexibly. It allows us to produce a new function by combining a function and an argument:\nJavaScript does not have a curry method, we can fix that by augmenting Funcion.prototype.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    Function<span class=\"token punctuation\">.</span><span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token string\">'curry'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> args <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">,</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">that</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">var</span> add1 <span class=\"token operator\">=</span> add<span class=\"token punctuation\">.</span><span class=\"token function\">curry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">writeln</span><span class=\"token punctuation\">(</span><span class=\"token function\">add1</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 7</span></code></pre></div>\n<p>The curry method works by creating a closure that holds that original function and the arguments to curry. It returns a function that, when invoked, returns the result of calling that original function, passing it all of the arguments from the invocation of curry and the current invocation. It uses the Array concat method to concatenate the two arrays of arguments together.</p>","excerpt":"Currying is a good way to process multiple arguments flexibly. It allows us to produce a new function by combining a function and an argument:\nJavaScript does not have a curry method, we can fix that by augmenting Funcion.prototype. The curry method works by creating a closure…","frontmatter":{"title":"Curry","tags":null,"excerpt":null},"fields":{"slug":"/blog/2015/09/19/curry.html","date":"September 18, 2015","path":"/2015-09-19-curry.html"}}},{"node":{"id":"1fffff10-4665-5a0f-bbf8-cd31d2ac0db8","html":"<p>Functions can use objects to remember the results of previous operations, making it possible to avoid unnecessary work. This optimization is called memoization. JavaScript’s objects and arrays are very convenient for this.</p>\n<p>In JavaScript we can keep our momoized results in a memo array by using closure feature. When our function is called, it first looks to see if it already knows the result. If it does, it can immediately return it.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> fibonnaci <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> memo <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">fib</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'number'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result <span class=\"token operator\">=</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fib</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> fib<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This function substantially reduce the amount of work.</p>\n<p>We can generalize this by making a function that helps us make memoized functions.</p>\n<h4>The memoized function:</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">memoizer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">memo fundamental</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">shell</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> result <span class=\"token operator\">!==</span> <span class=\"token string\">'number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                result <span class=\"token operator\">=</span> <span class=\"token function\">fundamental</span><span class=\"token punctuation\">(</span>shell<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                memo<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> shell<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now we can define fibonacci with the memoizer:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> fibonacci <span class=\"token operator\">=</span> <span class=\"token function\">memoizer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">shell<span class=\"token punctuation\">,</span> n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">shell</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">shell</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Besides, we can produce a memoizing factorial function:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> factorial <span class=\"token operator\">=</span> <span class=\"token function\">memoizer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">shell<span class=\"token punctuation\">,</span> n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> n <span class=\"token operator\">*</span> <span class=\"token function\">shell</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","excerpt":"Functions can use objects to remember the results of previous operations, making it possible to avoid unnecessary work. This optimization is called memoization. JavaScript’s objects and arrays are very convenient for this. In JavaScript we can keep our momoized results in a memo…","frontmatter":{"title":"Memoization (JS the good parts)","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/09/19/memoization.html","date":"September 18, 2015","path":"/2015-09-19-memoization.html"}}},{"node":{"id":"478bf3a7-91f4-53cf-a323-5e79778bd47f","html":"<p> Before talking about closure, let's start with scope first. <em>Scope</em> is\na programming language controls the visibility and lifetimes of variables and parameters. Most languages have block scope, which means that a block of statements wrapped with curly braces  are not visible from outside of the block. </p>\n<p> However JavaScript does not have block scope even though its block syntax suggests that it does. JavaScript does have function scope. It means that a variable defined within a function is visible everywhere within the function.\nThe closure feature is derived from function scope service. It enjoys the privilege of access to the outer value variable.</p>\n<p>Typically, closure can be used to give each handler a unique number.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add_the_handlers</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nodes</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> i<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            nodes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this snippet, it defines a  function and immediately invoke it, passing in i. That function will return an event handler function that is bound to the value of i that was passed in.</p>\n<p>&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;&#x3C; HEAD\nIt is worth noticing that in JavaScript, the inner function can have a longer lifetime than its outer function.\n=======\nIt is worth noticing that in JavaScript, the inner function can have a longer lifetim than its outer funciton.</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>origin/master</p>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n<p>Instead of initializing myObject with an object literal, we will initialize myObject by calling a function that returns an object literal.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">myObject</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> value <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function-variable function\">increment</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">inc</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                value <span class=\"token operator\">+=</span> <span class=\"token keyword\">typeof</span> inc <span class=\"token operator\">===</span> <span class=\"token string\">'number'</span> <span class=\"token operator\">?</span> inc <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">getValue</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><b>We are not assigning a function to myObject. We are assigning the result of invoking that function.</b> Notice the () on the last line. The function returns an object containing two methods, and those methods continue to enjoy the privilege of access to the value variable.</p>","excerpt":"Before talking about closure, let's start with scope first. Scope is\n a programming language controls the visibility and lifetimes of variables and parameters. Most languages have block scope, which means that a block of statements wrapped with curly braces  are not visible from…","frontmatter":{"title":"Closure (JS the good parts)","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/09/18/closure.html","date":"September 17, 2015","path":"/2015-09-18-closure.html"}}},{"node":{"id":"c68d6941-e9c8-5f2c-a6d8-ac9b4d650ddf","html":"<p>JavaScript allows us make new method available to the basic type lick arrays, strings, numbers, regular expressions, strings, functions.\nFor example, we can augment Function.prototype with a new method like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">method</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> func</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> func<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Morever, we can augment a specific type with a new method like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Number<span class=\"token punctuation\">.</span><span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token string\">'integer'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">[</span><span class=\"token keyword\">this</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'ceiling'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'floor'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">writeln</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token operator\">/</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>This method helps us convert a Number type to integer.</p>","excerpt":"JavaScript allows us make new method available to the basic type lick arrays, strings, numbers, regular expressions, strings, functions.\nFor example, we can augment Function.prototype with a new method like this: Morever, we can augment a specific type with a new method like this…","frontmatter":{"title":"Augmenting types (JS the good parts)","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/09/16/augment-type.html","date":"September 15, 2015","path":"/2015-09-16-augment-type.html"}}},{"node":{"id":"953f73f4-2dec-58bc-8599-5b6101b3ba88","html":"<blockquote>\n<p>From today on, I will write down some notes about the book <em>JavaScript The Good Parts</em>.</p>\n</blockquote>\n<p>Global variables are horrible in JavaScript. If you don't use them wisely, they will lurk in your code until break down your application. Because when your unconciously create a local variable with the same name of the global variables, terrible things will happen. So in many cases, global variables should be avoided.</p>\n<p>One way to minimize the use of global variables it to create a single global variable container.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token constant\">MYAPP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token constant\">MYAPP</span><span class=\"token punctuation\">.</span>stooge <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token string\">\"first_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joe\"</span>\n    <span class=\"token string\">\"last_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Howard\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token constant\">MYAPP</span><span class=\"token punctuation\">.</span>flight <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\nairline<span class=\"token operator\">:</span> <span class=\"token string\">\"Oceanic\"</span><span class=\"token punctuation\">,</span>\nnumber<span class=\"token operator\">:</span> <span class=\"token number\">815</span><span class=\"token punctuation\">,</span>\ndeparture<span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">IATA</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SYD\"</span><span class=\"token punctuation\">,</span>\n    time<span class=\"token operator\">:</span> <span class=\"token string\">\"2004-09-22\"</span><span class=\"token punctuation\">,</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">\"Sydney\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\narrival<span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">IATA</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LAX\"</span><span class=\"token punctuation\">,</span>\n    time<span class=\"token operator\">:</span> <span class=\"token string\">\"2004-09-23\"</span><span class=\"token punctuation\">,</span>\n    city<span class=\"token operator\">:</span> <span class=\"token string\">\"Los Angeles\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>By including your global footprint into a single name, it is significantly reducing the chance of bad interaction with other modules. And it is more readable, since MYAPP is like a namespace referring to its application.</p>","excerpt":"From today on, I will write down some notes about the book JavaScript The Good Parts. Global variables are horrible in JavaScript. If you don't use them wisely, they will lurk in your code until break down your application. Because when your unconciously create a local variable…","frontmatter":{"title":"Global Variables (JS the good parts)","tags":["JS"],"excerpt":null},"fields":{"slug":"/blog/2015/09/14/global-variables.html","date":"September 13, 2015","path":"/2015-09-14-global-variables.html"}}},{"node":{"id":"6341acb1-c251-5aab-bdd9-9b09c7059d31","html":"<p>Because Jekyll is a static website engine. So we cannot implement tradition dynamic searching through traversing database. In this case, I looked for other searching configurations applicable to Jekyll blog to solve the problem. Firstly, what comes up to my head is using Google search API. However, because of the goddamn GFW, it is invalid to use. So I resorted to other plausible ways. Here are three major solutions may work:</p>\n<ol>\n<li>\n<p><strong>JavaScript and JSON technique</strong></p>\n<ul>\n<li><a href=\"https://alexpearce.me/2012/04/simple-jekyll-searching/\">Simple Jekyll Searching by Alex Pearce</a>This solution is lack of full-text search feature.)</li>\n<li><a href=\"https://github.com/christian-fei/Simple-Jekyll-Search\">Simple-Jekyll-Search by christian-fei</a> A JavaScript library to add search functionality to any Jekyll blog.</li>\n<li><a href=\"http://kingauthur.info/2012/12/03/the-things-about-jekyll/\">Add static searching to Jekyll</a> </li>\n</ul>\n</li>\n<li><strong><a href=\"https://github.com/slashdotdash/jekyll-lunr-js-search\">lunr.js and Ruby Gem plugins</a> </strong></li>\n<li><strong><a href=\"https://swiftype.com/site-search\">A powerful third party search engine</a> It is a hosted and easy-deploy search solution.</strong></li>\n</ol>\n<p>Finally I adopted the third solution. It's very easy to deploy. You just need to follow instruction to set it up. Someday later I would like to try other two methods.</p>","excerpt":"Because Jekyll is a static website engine. So we cannot implement tradition dynamic searching through traversing database. In this case, I looked for other searching configurations applicable to Jekyll blog to solve the problem. Firstly, what comes up to my head is using Google…","frontmatter":{"title":"Search Bar","tags":null,"excerpt":null},"fields":{"slug":"/blog/2015/09/04/searching.html","date":"September 03, 2015","path":"/2015-09-04-searching.html"}}},{"node":{"id":"f1829ade-cfaf-5e69-8d90-d117c89549f4","html":"<p>Because Jekyll doesn't fully support tagging feature. I learned how to feature tags into my blogs. I found  several ways. Fianlly I made it work by following the guides given by <a href=\"http://www.minddust.com/post/tags-and-categories-on-github-pages/\">MIDDUST</a>. This method need no plugin but you have to  generate a separate page everytime you create a new tag.  So it's like a work-around method.</p>\n<p>Here are other methods may help:</p>\n<ul>\n<li><a href=\"http://charliepark.org/tags-in-jekyll/\">Tags In Jekyll by Charlie Park(using Rugy plugin)</a></li>\n<li><a href=\"An%20easy%20way%20to%20support%20tags%20in%20a%20jekyll%20blog\">A method similar to MIDDUST</a></li>\n<li><a href=\"http://segmentfault.com/a/1190000000406017\">A method using JSON</a></li>\n</ul>","excerpt":"Because Jekyll doesn't fully support tagging feature. I learned how to feature tags into my blogs. I found  several ways. Fianlly I made it work by following the guides given by MIDDUST. This method need no plugin but you have to  generate a separate page everytime you create a…","frontmatter":{"title":"Creating Tags","tags":["GADGET"],"excerpt":null},"fields":{"slug":"/blog/2015/09/03/tag.html","date":"September 02, 2015","path":"/2015-09-03-tag.html"}}},{"node":{"id":"4df17781-6697-5114-982c-48eb8b21c917","html":"<p>I created a button style with some fancy effects. It only depends on HTML + CSS. It shows the power of CSS transform and transition properties. However the CSS code is somehow redundant and prolix. I am going to learn a CSS preprocessor like SCSS to improve efficiency.</p>\n<h4>Ghost Button</h4>\n<p data-height=\"268\" data-theme-id=\"0\" data-slug-hash=\"pjoRWQ\" data-default-tab=\"result\" data-user=\"dontry018\" class='codepen'>See the Pen <a href='http://codepen.io/dontry018/pen/pjoRWQ/'>Ghost Button</a> by loconomo (<a href='http://codepen.io/dontry018'>@dontry018</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>","excerpt":"I created a button style with some fancy effects. It only depends on HTML + CSS. It shows the power of CSS transform and transition properties. However the CSS code is somehow redundant and prolix. I am going to learn a CSS preprocessor like SCSS to improve efficiency. Ghost…","frontmatter":{"title":"Ghost Button","tags":["GADGET","CSS"],"excerpt":null},"fields":{"slug":"/blog/2015/09/01/ghost-button.html","date":"August 31, 2015","path":"/2015-09-01-ghost-button.html"}}},{"node":{"id":"2ef4b31b-40c9-547b-9621-8f76673b8555","html":"<p>I added a tooltip for my social links. I use jQuery to set the tooltip. jQuery is an amazing framework that make my work more efficient.</p>","excerpt":"I added a tooltip for my social links. I use jQuery to set the tooltip. jQuery is an amazing framework that make my work more efficient.","frontmatter":{"title":"Tooltip","tags":["GADGET","JQUERY"],"excerpt":null},"fields":{"slug":"/blog/2015/08/31/tooltip.html","date":"August 30, 2015","path":"/2015-08-31-tooltip.html"}}},{"node":{"id":"1c202194-c429-51e5-b76c-f4c6eedef83b","html":"<p>The Holy Grail Layout is a classic CSS problem with various solutions presented over time. Many people are searching for the best method and several goot templates are presented.</p>\n<p>Most CSS solutions for Holy Grail aim to meet a few goals:</p>\n<ul>\n<li>They should have a fluid center with fixed-width sidebars.</li>\n<li>The center column(main content) should appear first in the HTML source.</li>\n<li>All columns should be the same height, regarless of which column is actually the tallest.</li>\n<li>They should require minimal markup.</li>\n<li>The footer should \"stick\"  to the bottom of the page when content is sparse.</li>\n</ul>\n<p>And one of the most classic templates is like this:</p>\n<h4>Holy Grails Layout</h4>\n<p data-height=\"268\" data-theme-id=\"0\" data-slug-hash=\"pJMRgB\" data-default-tab=\"result\" data-user=\"dontry018\" class='codepen'>See the Pen <a href='http://codepen.io/dontry018/pen/pJMRgB/'>Classic Holy Grail</a> by loconomo (<a href='http://codepen.io/dontry018'>@dontry018</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>\n<p>We can see that how <em>float:left</em> and <em>nagative margin-left</em> are used to let sidebars stick aside. Besides combining <em>padding-bottom: 999px, margin-bottom: -999px</em>, it is able to make the same height for all columns.However, it is not adaptive enough because the main content part need to be set a pair of fixed padding values.</p>\n<p>Then the Taobao UED create a more adaptive and advanced version of this classic layout.</p>\n<h4>Wings layout</h4>\n<p data-height=\"268\" data-theme-id=\"0\" data-slug-hash=\"BNXQMJ\" data-default-tab=\"result\" data-user=\"dontry018\" class='codepen'>See the Pen <a href='http://codepen.io/dontry018/pen/BNXQMJ/'>Wings Layout</a> by loconomo (<a href='http://codepen.io/dontry018'>@dontry018</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>\n<br>\n<br>\n<br>\n<br>\n<h4>More info for Holy Grail layouts:</h4>\n<ul>\n<li><a href=\"https://philipwalton.github.io/solved-by-flexbox/demos/holy-grail/\">Holy Grail Layout solved by Flexbox</a></li>\n<li><a href=\"https://philipwalton.github.io/solved-by-flexbox/demos/holy-grail/\">A list of solutions</a></li>\n</ul>","excerpt":"The Holy Grail Layout is a classic CSS problem with various solutions presented over time. Many people are searching for the best method and several goot templates are presented. Most CSS solutions for Holy Grail aim to meet a few goals: They should have a fluid center with fixed…","frontmatter":{"title":"Holy Grail Layout","tags":["LAYOUT","HTML"],"excerpt":null},"fields":{"slug":"/blog/2015/08/24/holy-grail-layout.html","date":"August 23, 2015","path":"/2015-08-24-holy-grail-layout.html"}}},{"node":{"id":"b01fc389-3e99-5191-8bd8-a0174b6cfd2f","html":"<p>Today I tried to figure out how to use some pretty icon to show my contact at footer. Then I found <a href=\"http://fontawesome.dashgame.com/\">Font-awesome</a>. It has a vast variety of useful website icons which is designed for Bootstrap. It is controlled by CSS that can create many amazing effects. It satifies all I need and make my site look nicer.</p>","excerpt":"Today I tried to figure out how to use some pretty icon to show my contact at footer. Then I found Font-awesome. It has a vast variety of useful website icons which is designed for Bootstrap. It is controlled by CSS that can create many amazing effects. It satifies all I need and…","frontmatter":{"title":"Font-awesome","tags":["ICON","FONT"],"excerpt":null},"fields":{"slug":"/blog/2015/08/22/font-awesome.html","date":"August 21, 2015","path":"/2015-08-22-font-awesome.html"}}},{"node":{"id":"303398d6-70e4-5a92-adb5-57bdd35496c2","html":"<p>Today I set up the music player and slide show modal for my blog. I generate the music player from <a href=\"http://music.163.com\">Netease Music</a>. It's very easy, you could create an external link from an album. For carousel, it's kinda complicated and challenging. But with the help of <a href=\"http://jekyll.tips/tutorials/photo-gallery/\">Jekyll tips</a>, I did accomplish it at last. I think I should better understand the Jekyll and Liquid.</p>","excerpt":"Today I set up the music player and slide show modal for my blog. I generate the music player from Netease Music. It's very easy, you could create an external link from an album. For carousel, it's kinda complicated and challenging. But with the help of Jekyll tips, I did…","frontmatter":{"title":"Slide Show","tags":["MODAL"],"excerpt":null},"fields":{"slug":"/blog/2015/08/16/carousel.html","date":"August 15, 2015","path":"/2015-08-16-carousel.html"}}},{"node":{"id":"6147ad3c-a1ca-5520-9eb2-b2ee5c4d3d7c","html":"<p>Today I set up the paginator[<a href=\"http://jekyllrb.com/docs/pagination/\">1</a>,<a href=\"http://www.ericlagergren.com/blog/jekyll-pagination/\">2</a>] and comment[<a href=\"http://duoshuo.com/\">3</a>] modal on my blog. Besides I fixed some layout glitches, too. It looks much better now. </p>","excerpt":"Today I set up the paginator[1,2] and comment[3] modal on my blog. Besides I fixed some layout glitches, too. It looks much better now.","frontmatter":{"title":"Paginator and Comment Modal","tags":["MODAL","GADGET"],"excerpt":null},"fields":{"slug":"/blog/2015/08/15/paginator-and-comment.html","date":"August 14, 2015","path":"/2015-08-15-paginator-and-comment.html"}}},{"node":{"id":"9da6e3cc-74a9-5d87-82a5-e7defe83875d","html":"<p>Another step</p>\n<p>Tonight I create a post template. It's not a easy task. I was quite confused about the usage of jekyll. I thought some of the features were out of work. Then I took a gander with other blogs and their source. It is very useful. And I finally found a way to solve my problem. Hooray~~~</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Note:\n\t- the usage of include\n\t- use markdownify to tranform page.content to markdown format\n\t- the difference between relative and definite directory\n\t- the usage of viewport</code></pre></div>","excerpt":"Another step Tonight I create a post template. It's not a easy task. I was quite confused about the usage of jekyll. I thought some of the features were out of work. Then I took a gander with other blogs and their source. It is very useful. And I finally found a way to solve my…","frontmatter":{"title":"Create Post Template","tags":null,"excerpt":null},"fields":{"slug":"/blog/2015/08/15/create-post-template.html","date":"August 14, 2015","path":"/2015-08-15-create-post-template.html"}}},{"node":{"id":"9e2f857c-d065-57cd-8cd9-f07d5346ffd6","html":"<p>I migrated my bootstrap blog to GitHub pages. Now I build my GitHub blog from cratch. I will try to perfect it. </p>","excerpt":"I migrated my bootstrap blog to GitHub pages. Now I build my GitHub blog from cratch. I will try to perfect it.","frontmatter":{"title":"Bootstrap","tags":["BOOTSTRAP","LAYOUT"],"excerpt":null},"fields":{"slug":"/blog/2015/08/13/bootstrap.html","date":"August 12, 2015","path":"/2015-08-13-bootstrap.html"}}},{"node":{"id":"a66f3311-4405-59c6-83e1-2bf8203b999e","html":"<p>This is my first blog</p>\n<p>I start this blog on 12/08/2015.</p>\n<p>This is really amazing. I can see my webpage everywhere.</p>\n<p>And I learned some new stuffs like: </p>\n<ul>\n<li>github page</li>\n<li>jekyll</li>\n<li>liquid</li>\n<li>ruby on rails</li>\n</ul>\n<p>I hope I could get the hang of github pages soon</p>","excerpt":"This is my first blog I start this blog on 12/08/2015. This is really amazing. I can see my webpage everywhere. And I learned some new stuffs like:  github page jekyll liquid ruby on rails I hope I could get the hang of github pages soon","frontmatter":{"title":"First post","tags":null,"excerpt":null},"fields":{"slug":"/blog/2015/08/13/first-post.html","date":"August 12, 2015","path":"/2015-08-13-first-post.html"}}},{"node":{"id":"3a221e10-04b6-55e6-976a-04bd8301120c","html":"<p>Hello world~~</p>\n<p>hello world, enjoy the blogging</p>\n<!-- more -->\n<p>my first ariticle,say something here</p>","excerpt":"Hello world~~ hello world, enjoy the blogging","frontmatter":{"title":"Testing Post","tags":null,"excerpt":"Hello world"},"fields":{"slug":"/blog/2015/08/12/hello-world.html","date":"August 11, 2015","path":"/2015-08-12-hello-world.html"}}}]}}}